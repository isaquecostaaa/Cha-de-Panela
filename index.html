<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="styles.css">

  <title>Escolha de Item - Chá de Panela</title>
  
  <!-- Configuração Firebase -->
  <script type="module">
    // Configuração do Firebase
const firebaseConfig = {
  apiKey: "AIzaSyDTCwy1pQM0E3yVifYsW69vhrSSGh-zr5M",
  authDomain: "cha-de-panela-39a8e.firebaseapp.com",
  databaseURL: "https://cha-de-panela-39a8e-default-rtdb.firebaseio.com",
  projectId: "cha-de-panela-39a8e",
  storageBucket: "cha-de-panela-39a8e.firebasestorage.app",
  messagingSenderId: "427821589232",
  appId: "1:427821589232:web:9dd9dfd2d695ffbb955835"
  };
  
  // Inicializar Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
  import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js";
  
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  
  // Referência ao banco de dados
  const itemsRef = ref(db, 'items/');
  
  // Monitorar itens no banco de dados
  onValue(itemsRef, (snapshot) => {
    const items = snapshot.val();
    document.querySelectorAll('.item-btn').forEach(button => {
      const itemName = button.dataset.item;
      if (items && items[itemName] && items[itemName].reserved) {
        button.textContent = `${itemName} (Indisponível)`;
        button.disabled = true;
      } else {
        button.textContent = itemName;
        button.disabled = false;
      }
    });
  });
  
  // Lidar com a escolha de um item
  document.querySelectorAll('.item-btn').forEach(button => {
    button.addEventListener('click', () => {
      const userName = prompt("Digite seu nome:");
      if (!userName) return;
  
      const itemName = button.dataset.item;
  
      // Atualizar o banco de dados com a reserva do item
      set(ref(db, `items/${itemName}`), {
        reserved: true,
        reservedBy: userName
      }).then(() => {
        alert(`${itemName} foi reservado por ${userName}.`);
      }).catch((error) => {
        console.error("Erro ao reservar o item:", error);
      });
    });
  });
  </script>

  <!-- Estilo CSS Opcional -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Escolha de um Item</h1>
  <p>Escolha um item para o chá de panela:</p>

  <div id="item-list">
    <button data-item="Prato" class="item-btn">Prato</button>
    <button data-item="Panela" class="item-btn">Panela</button>
    <button data-item="Talheres" class="item-btn">Talheres</button>
  </div>

  <!-- Script JS Principal -->
  <script src="script.js"></script>
</body>
</html>
